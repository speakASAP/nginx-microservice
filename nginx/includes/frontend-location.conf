# Frontend service location block
# This block handles root path (/) routing to frontend services
# Usage: set $FRONTEND_UPSTREAM variable to the upstream block name (container_base without color)
# Example: set $FRONTEND_UPSTREAM crypto-ai-frontend; include /etc/nginx/includes/frontend-location.conf;
# The upstream block includes port numbers and resolve directive for runtime DNS resolution

location / {
    proxy_pass http://$FRONTEND_UPSTREAM;
    include /etc/nginx/includes/common-proxy-settings.conf;
    
    # Fallback to default page on upstream errors (502, 503, 504)
    # This provides a graceful fallback when services are temporarily unavailable
    error_page 502 503 504 = @default_page;
}

# Fallback location for default landing page
location @default_page {
    root /var/www/html;
    try_files /default.html =502;
    add_header Content-Type text/html;
}

